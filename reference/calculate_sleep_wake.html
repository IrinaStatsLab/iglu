<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculate metrics for values inside and/or outside a specified time range. — calculate_sleep_wake • iglu</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Calculate metrics for values inside and/or outside a specified time range. — calculate_sleep_wake" />
<meta property="og:description" content="This function applies a given function to a subset of data filtered by time of day." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">iglu</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/iglu.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/AGP_and_Episodes.html">AGP and Episodes</a>
    </li>
    <li>
      <a href="../articles/lasagna_plots.html">lasagna_plots</a>
    </li>
    <li>
      <a href="../articles/metrics_list.html">List of metrics implemented in iglu</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate metrics for values inside and/or outside a specified time range.</h1>
    
    <div class="hidden name"><code>calculate_sleep_wake.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function applies a given function to a subset of data filtered by time of day.</p>
    </div>

    <pre class="usage"><span class='fu'>calculate_sleep_wake</span><span class='op'>(</span>
  <span class='va'>data</span>,
  <span class='va'>FUN</span>,
  sleep_start <span class='op'>=</span> <span class='fl'>0</span>,
  sleep_end <span class='op'>=</span> <span class='fl'>6</span>,
  calculate <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"sleep"</span>, <span class='st'>"wake"</span>, <span class='st'>"both"</span><span class='op'>)</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>DataFrame object with column names "id", "time", and "gl".</p></td>
    </tr>
    <tr>
      <th>FUN</th>
      <td><p>Function to be applied to the filtered data.</p></td>
    </tr>
    <tr>
      <th>sleep_start</th>
      <td><p>Numeric between 0-24 signifying the hour at which the time range should start.</p></td>
    </tr>
    <tr>
      <th>sleep_end</th>
      <td><p>Numeric between 0-24 signifying the hour at which the time range should end.</p></td>
    </tr>
    <tr>
      <th>calculate</th>
      <td><p>String determining whether FUN should be applied to values inside or outside the time range. Both separately is an option</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Optional arguments which will be passed to FUN</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of the same return type as FUN, with columns corresponding to the values returned by FUN. Separated for values inside or outside the time range, if calculate = both.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>An object of the same return type as FUN, with the same column names as FUN will be returned.
If calculate = "both", there will be columns for FUN applied to both inside and outside values,
with either "in range" or "out of range" append to signify whether the statistic was calculated on values
which were inside the time range or outside the range.</p>
<p>FUN is found by a call to match.fun and typically is either a function or a character string
specifying a function to be searched for from the environment of the call to apply.
Arguments in ... cannot have the same name as any of the other arguments, and care may be needed to avoid partial matching to FUN.
FUN is applied to the data after the data is filtered based on whether its hour falls within the given range.
If sleep_start is an integer, all times within that hour will be included in the range, but if sleep_end is an integer
only times up to that hour will be included in the range.
If sleep_start is after sleep_end, the data will be filtered to include all hours after sleep_start and all times before sleep_end.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>example_data_1_subject</span><span class='op'>)</span>
<span class='fu'>calculate_sleep_wake</span><span class='op'>(</span><span class='va'>example_data_1_subject</span>, <span class='va'>sd_glu</span>, calculate <span class='op'>=</span> <span class='st'>"sleep"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 1 × 2</span>
#&gt;   id           SD
#&gt;   <span style='color: #949494; font-style: italic;'>&lt;fct&gt;</span>     <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>
#&gt; <span style='color: #BCBCBC;'>1</span> Subject 1  25.4</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>example_data_5_subject</span><span class='op'>)</span>
<span class='fu'>calculate_sleep_wake</span><span class='op'>(</span><span class='va'>example_data_5_subject</span>, <span class='va'>cogi</span>, targets <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>80</span>, <span class='fl'>150</span><span class='op'>)</span>, weights <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.3</span>,<span class='fl'>.2</span>,<span class='fl'>.5</span><span class='op'>)</span>, calculate <span class='op'>=</span> <span class='st'>"wake"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 5 × 2</span>
#&gt;   id         COGI
#&gt;   <span style='color: #949494; font-style: italic;'>&lt;fct&gt;</span>     <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>
#&gt; <span style='color: #BCBCBC;'>1</span> Subject 1 0.824
#&gt; <span style='color: #BCBCBC;'>2</span> Subject 2 0.525
#&gt; <span style='color: #BCBCBC;'>3</span> Subject 3 0.694
#&gt; <span style='color: #BCBCBC;'>4</span> Subject 4 0.822
#&gt; <span style='color: #BCBCBC;'>5</span> Subject 5 0.559</div><div class='input'><span class='fu'>calculate_sleep_wake</span><span class='op'>(</span><span class='va'>example_data_5_subject</span>, <span class='va'>sd_measures</span>, sleep_start <span class='op'>=</span> <span class='fl'>2</span>, sleep_end <span class='op'>=</span> <span class='fl'>8</span>, calculate <span class='op'>=</span> <span class='st'>"both"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 5 × 13</span>
#&gt;   id        `SDw sleep` `SDhhmm sleep` `SDwsh sleep` `SDdm sleep` `SDb sleep`
#&gt;   <span style='color: #949494; font-style: italic;'>&lt;fct&gt;</span>           <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>          <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>         <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>        <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>       <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>
#&gt; <span style='color: #BCBCBC;'>1</span> Subject 1        10.2           3.02          3.15         21.3        23.9
#&gt; <span style='color: #BCBCBC;'>2</span> Subject 2        18.9          12.8           6.22         41.9        43.6
#&gt; <span style='color: #BCBCBC;'>3</span> Subject 3        17.6           9.99          4.86         20.1        32.7
#&gt; <span style='color: #BCBCBC;'>4</span> Subject 4        10.8           3.98          3.43         12.2        17.3
#&gt; <span style='color: #BCBCBC;'>5</span> Subject 5        28.1          10.7           5.88         29.4        38.4
#&gt; <span style='color: #949494;'># … with 7 more variables: SDbdm sleep &lt;dbl&gt;, SDw wake &lt;dbl&gt;,</span>
#&gt; <span style='color: #949494;'>#   SDhhmm wake &lt;dbl&gt;, SDwsh wake &lt;dbl&gt;, SDdm wake &lt;dbl&gt;, SDb wake &lt;dbl&gt;,</span>
#&gt; <span style='color: #949494;'>#   SDbdm wake &lt;dbl&gt;</span></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Steve Broll, David Buchanan, Elizabeth Chun, John Muschelli, Nathaniel Fernandes, Jacek Urbanek, Irina Gaynanova.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


