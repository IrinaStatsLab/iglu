<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Calculates Mean Amplitude of Glycemic Excursions (see "mage") — mage_ma_single • iglu</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Calculates Mean Amplitude of Glycemic Excursions (see " mage mage_ma_single><meta property="og:description" content='This function is an internal function used by "mage". The function will calculate the Mean Amplitude of Glycemic Excursions (MAGE) on all the values of the inputted data set. To calculate separate MAGE values for a group of subjects, use the "mage" function.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">iglu</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/iglu.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/AGP_and_Episodes.html">AGP and Episodes</a>
    </li>
    <li>
      <a href="../articles/MAGE.html">MAGE Algorithm</a>
    </li>
    <li>
      <a href="../articles/lasagna_plots.html">Lasagna Plots in iglu</a>
    </li>
    <li>
      <a href="../articles/metrics_list.html">List of metrics implemented in iglu</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculates Mean Amplitude of Glycemic Excursions (see "mage")</h1>
    
    <div class="hidden name"><code>mage_ma_single.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function is an internal function used by "mage". The function will calculate the Mean Amplitude of Glycemic Excursions (MAGE) on <strong>all</strong> the values of the inputted data set. To calculate separate MAGE values for a group of subjects, use the "mage" function.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">mage_ma_single</span><span class="op">(</span>
  <span class="va">data</span>,
  short_ma <span class="op">=</span> <span class="fl">5</span>,
  long_ma <span class="op">=</span> <span class="fl">32</span>,
  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"plus"</span>, <span class="st">"minus"</span><span class="op">)</span>,
  plot <span class="op">=</span> <span class="cn">FALSE</span>,
  dt0 <span class="op">=</span> <span class="cn">NULL</span>,
  inter_gap <span class="op">=</span> <span class="fl">45</span>,
  tz <span class="op">=</span> <span class="st">""</span>,
  title <span class="op">=</span> <span class="cn">NA</span>,
  xlab <span class="op">=</span> <span class="cn">NA</span>,
  ylab <span class="op">=</span> <span class="cn">NA</span>,
  show_ma <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>DataFrame object with column names "id", "time", and "gl". Should only be data for 1 subject. In case multiple subject ids are detected, the warning is produced and only 1st subject is used.</p></dd>
<dt>short_ma</dt>
<dd><p>Integer for period length of the short moving average. Must be positive and less than "long_ma", default value is 5. (Recommended &lt;15)</p></dd>
<dt>long_ma</dt>
<dd><p>Integer for period length for the long moving average, default value is 32. (Recommended &gt;20)</p></dd>
<dt>type</dt>
<dd><p>One of "plus", "minus", "auto" (Default: auto). Algorithm will either calculate MAGE+ (nadir to peak), MAGE- (peak to nadir), or automatically choose based on the first countable excursion.</p></dd>
<dt>plot</dt>
<dd><p>Boolean. Returns ggplot if TRUE.</p></dd>
<dt>dt0</dt>
<dd><p>The time frequency for interpolation in minutes, the default will match the CGM meter's frequency (e.g. 5 min for Dexcom).</p></dd>
<dt>inter_gap</dt>
<dd><p>The maximum allowable gap (in minutes) for interpolation. The values will not be interpolated between the glucose measurements that are more than inter_gap minutes apart. The default value is 45 min.</p></dd>
<dt>tz</dt>
<dd><p>A character string specifying the time zone to be used. System-specific (see <code><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></code>), but " " is the current time zone, and "GMT" is UTC (Universal Time, Coordinated). Invalid values are most commonly treated as UTC, on some platforms with a warning.</p></dd>
<dt>title</dt>
<dd><p>Title for the ggplot. Defaults to "Glucose Trace - Subject [ID]"</p></dd>
<dt>xlab</dt>
<dd><p>Label for x-axis of ggplot. Defaults to "Time"</p></dd>
<dt>ylab</dt>
<dd><p>Label for y-axis of ggplot. Defaults to "Glucose Level"</p></dd>
<dt>show_ma</dt>
<dd><p>Whether to show the moving average lines on the plot or not</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>The numeric MAGE value for the inputted glucose values or a ggplot if <code>plot = TRUE</code></p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>See "mage".</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Nathaniel Fernandes</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">example_data_1_subject</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">mage_ma_single</span><span class="op">(</span></span>
<span class="r-in">   <span class="va">example_data_1_subject</span>,</span>
<span class="r-in">   short_ma <span class="op">=</span> <span class="fl">4</span>,</span>
<span class="r-in">   long_ma <span class="op">=</span> <span class="fl">24</span>,</span>
<span class="r-in">   type <span class="op">=</span> <span class="st">'plus'</span><span class="op">)</span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Gap found in data for subject id: Subject 1, that</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>     exceeds long moving average. Double check glucose data.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 93.79795</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">mage_ma_single</span><span class="op">(</span></span>
<span class="r-in">   <span class="va">example_data_1_subject</span>,</span>
<span class="r-in">   inter_gap <span class="op">=</span> <span class="fl">300</span><span class="op">)</span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Gap found in data for subject id: Subject 1, that</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>     exceeds long moving average. Double check glucose data.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 83.3179</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">mage_ma_single</span><span class="op">(</span></span>
<span class="r-in">   <span class="va">example_data_1_subject</span>,</span>
<span class="r-in">   plot<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span class="r-in">   title<span class="op">=</span><span class="st">"Patient X"</span>,</span>
<span class="r-in">   xlab<span class="op">=</span><span class="st">"Time"</span>,</span>
<span class="r-in">   ylab<span class="op">=</span><span class="st">"Glucose Level (mg/dL)"</span>,</span>
<span class="r-in">   show_ma<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Gap found in data for subject id: Subject 1, that</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>     exceeds long moving average. Double check glucose data.</span>
<span class="r-plt img"><img src="mage_ma_single-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Steve Broll, David Buchanan, Elizabeth Chun, John Muschelli, Nathaniel Fernandes, Jung Hoon Seo, Johnathan Shih, Jacek Urbanek, John Schwenck, Irina Gaynanova.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer></div>

  


  

  </body></html>

